(()=>{var e={};e.id=797,e.ids=[797],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},7147:e=>{"use strict";e.exports=require("fs")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},4074:e=>{"use strict";e.exports=require("perf_hooks")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},1267:e=>{"use strict";e.exports=require("worker_threads")},3331:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>p,originalPathname:()=>d,pages:()=>u,routeModule:()=>h,tree:()=>l});var n=r(7096),s=r(6132),i=r(7284),a=r.n(i),o=r(2564),c={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>o[e]);r.d(t,c);let l=["",{children:["search",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,5607)),"/Users/kajimurakeiya/EgoApp/frontend/app/search/page.js"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,7481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,8489)),"/Users/kajimurakeiya/EgoApp/frontend/app/layout.js"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9291,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,7481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],u=["/Users/kajimurakeiya/EgoApp/frontend/app/search/page.js"],d="/search/page",p={require:r,loadChunk:()=>Promise.resolve()},h=new n.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/search/page",pathname:"/search",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},9944:(e,t,r)=>{Promise.resolve().then(r.bind(r,5843))},5843:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Search});var n=r(784),s=r(1440),i=r.n(s),a=r(3642),o=r.n(a),c=r(9885);let l=o()(()=>Promise.all([r.e(914),r.e(766)]).then(r.bind(r,766)),{loadableGenerated:{modules:["/Users/kajimurakeiya/EgoApp/frontend/app/search/page.js -> ./VadVideoPlayer"]},ssr:!1});function Search(){let[e,t]=(0,c.useState)([["","","",""],["","","",""],["","","",""],["","","",""],["","","",""],["","","",""],["","","",""],["","","",""],["","","",""],["","","",""]]);(0,c.useLayoutEffect)(()=>{fetch("http://127.0.0.1:3000/").then(e=>e.json()).then(e=>t(e))},[]);let s=(0,c.useRef)(null),[a,o]=(0,c.useState)({search:""}),[u,d]=(0,c.useState)(0),handleSubmit=async e=>{e.preventDefault();try{let e=await fetch("http://127.0.0.1:3000/search/text",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(e.ok){let t=await e.json();d(t.time),s.current.currentTime=t.time,s.current.play()}else console.log("errored")}catch(e){console.error("エラー:",e)}},p=r(9950),[h,x]=(0,c.useState)(new p({bitRate:128})),[m,j]=(0,c.useState)(!1),[f,y]=(0,c.useState)(null),[g,_]=(0,c.useState)(!1),startRecording=async()=>{await h.start().then(()=>{_(!0)}).catch(e=>{console.error(e)})},stopRecording=async()=>{await h.stop().getMp3().then(([e,t])=>{let r=new File(e,"audio.mp3",{type:t.type,lastModified:Date.now()});j(!0),y(r)}).catch(e=>{console.log(e),j(!1)}),_(!1)};return(0,c.useEffect)(()=>{let fn=async()=>{try{if(f){let e=new FormData;e.append("file",f);let t=await fetch("http://127.0.0.1:3000/audio",{method:"POST",body:e});if(t.ok){let e=await t.json();s.current.currentTime=e.time,s.current.play()}else console.log("errored")}}catch(e){alert(e),j(!1)}y(null)};fn()},[f]),(0,n.jsxs)("html",{lang:"ja",children:[n.jsx("head",{children:n.jsx("title",{children:"エタノール"})}),(0,n.jsxs)("body",{children:[n.jsx(i(),{href:"/",children:"動画選択画面"}),n.jsx("div",{id:"vadVideoplayer",children:n.jsx(l,{videoRef:s})}),(0,n.jsxs)("div",{id:"time",children:[n.jsx("span",{id:"currentTime",children:"0"})," / ",n.jsx("span",{id:"totalTime",children:"0"})]}),n.jsx("div",{children:(0,n.jsxs)("form",{onSubmit:handleSubmit,children:[n.jsx("label",{htmlFor:"search",children:"Search Event"}),n.jsx("input",{type:"text",id:"search",name:"search",value:FormData.search,onChange:e=>{let{name:t,value:r}=e.target;o({...a,[t]:r})}}),n.jsx("button",{children:"検索"})]})}),(0,n.jsxs)("div",{id:"audio",children:[n.jsx("button",{onClick:startRecording,children:"録音開始"}),n.jsx("button",{onClick:stopRecording,children:"録音停止"})]}),n.jsx("div",{id:"control",children:(0,n.jsxs)("ul",{children:[(0,n.jsxs)("li",{children:["event01",n.jsx("button",{onClick:()=>{s.current.currentTime=e[1][2],s.current.play()},children:e[1][0]})]}),(0,n.jsxs)("li",{children:["event02",n.jsx("button",{onClick:()=>{s.current.currentTime=e[2][2],s.current.play()},children:e[2][0]})]}),(0,n.jsxs)("li",{children:["event03",n.jsx("button",{onClick:()=>{s.current.currentTime=e[3][2],s.current.play()},children:e[3][0]})]}),(0,n.jsxs)("li",{children:["event04",n.jsx("button",{onClick:()=>{s.current.currentTime=e[4][2],s.current.play()},children:e[4][0]})]}),(0,n.jsxs)("li",{children:["event05",n.jsx("button",{onClick:()=>{s.current.currentTime=e[5][2],s.current.play()},children:e[5][0]})]}),(0,n.jsxs)("li",{children:["event06",n.jsx("button",{onClick:()=>{s.current.currentTime=e[6][2],s.current.play()},children:e[6][0]})]}),(0,n.jsxs)("li",{children:["event07",n.jsx("button",{onClick:()=>{s.current.currentTime=e[7][2],s.current.play()},children:e[7][0]})]}),(0,n.jsxs)("li",{children:["event08",n.jsx("button",{onClick:()=>{s.current.currentTime=e[8][2],s.current.play()},children:e[8][0]})]}),(0,n.jsxs)("li",{children:["event09",n.jsx("button",{onClick:()=>{s.current.currentTime=e[9][2],s.current.play()},children:e[9][0]})]})]})})]})]})}},5607:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>a,__esModule:()=>i,default:()=>c});var n=r(5153);let s=(0,n.createProxy)(String.raw`/Users/kajimurakeiya/EgoApp/frontend/app/search/page.js`),{__esModule:i,$$typeof:a}=s,o=s.default,c=o},7481:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var n=r(8531);let __WEBPACK_DEFAULT_EXPORT__=e=>{let t=(0,n.fillMetadataSegment)(".",e.params,"favicon.ico");return[{type:"image/x-icon",sizes:"16x16",url:t+""}]}}};var t=require("../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[96,52,440,539,403],()=>__webpack_exec__(3331));module.exports=r})();