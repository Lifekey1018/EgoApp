(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[797],{9349:function(e,t,n){Promise.resolve().then(n.bind(n,1453))},1453:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Search}});var r=n(7437),l=n(1396),i=n.n(l),c=n(8811),u=n.n(c),o=n(2265);let a=u()(()=>Promise.all([n.e(342),n.e(732),n.e(989)]).then(n.bind(n,4989)),{loadableGenerated:{webpack:()=>[4989]},ssr:!1});function Search(){let[e,t]=(0,o.useState)([["","","",""],["","","",""],["","","",""],["","","",""],["","","",""],["","","",""],["","","",""],["","","",""],["","","",""],["","","",""]]);(0,o.useLayoutEffect)(()=>{fetch("http://127.0.0.1:3000/").then(e=>e.json()).then(e=>t(e))},[]);let l=(0,o.useRef)(null),[c,u]=(0,o.useState)({search:""}),[s,d]=(0,o.useState)(0),handleSubmit=async e=>{e.preventDefault();try{let e=await fetch("http://127.0.0.1:3000/search/text",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});if(e.ok){let t=await e.json();d(t.time),l.current.currentTime=t.time,l.current.play()}else console.log("errored")}catch(e){console.error("エラー:",e)}},f=n(4765),[h,p]=(0,o.useState)(new f({bitRate:128})),[j,m]=(0,o.useState)(!1),[b,y]=(0,o.useState)(null),[x,v]=(0,o.useState)(!1),startRecording=async()=>{await h.start().then(()=>{v(!0)}).catch(e=>{console.error(e)})},stopRecording=async()=>{await h.stop().getMp3().then(e=>{let[t,n]=e,r=new File(t,"audio.mp3",{type:n.type,lastModified:Date.now()});m(!0),y(r)}).catch(e=>{console.log(e),m(!1)}),v(!1)};return(0,o.useEffect)(()=>{let fn=async()=>{try{if(b){let e=new FormData;e.append("file",b);let t=await fetch("http://127.0.0.1:3000/audio",{method:"POST",body:e});if(t.ok){let e=await t.json();l.current.currentTime=e.time,l.current.play()}else console.log("errored")}}catch(e){alert(e),m(!1)}y(null)};fn()},[b]),(0,r.jsxs)("html",{lang:"ja",children:[(0,r.jsx)("head",{children:(0,r.jsx)("title",{children:"エタノール"})}),(0,r.jsxs)("body",{children:[(0,r.jsx)(i(),{href:"/",children:"動画選択画面"}),(0,r.jsx)("div",{id:"vadVideoplayer",children:(0,r.jsx)(a,{videoRef:l})}),(0,r.jsxs)("div",{id:"time",children:[(0,r.jsx)("span",{id:"currentTime",children:"0"})," / ",(0,r.jsx)("span",{id:"totalTime",children:"0"})]}),(0,r.jsx)("div",{children:(0,r.jsxs)("form",{onSubmit:handleSubmit,children:[(0,r.jsx)("label",{htmlFor:"search",children:"Search Event"}),(0,r.jsx)("input",{type:"text",id:"search",name:"search",value:FormData.search,onChange:e=>{let{name:t,value:n}=e.target;u({...c,[t]:n})}}),(0,r.jsx)("button",{children:"検索"})]})}),(0,r.jsxs)("div",{id:"audio",children:[(0,r.jsx)("button",{onClick:startRecording,children:"録音開始"}),(0,r.jsx)("button",{onClick:stopRecording,children:"録音停止"})]}),(0,r.jsx)("div",{id:"control",children:(0,r.jsxs)("ul",{children:[(0,r.jsxs)("li",{children:["event01",(0,r.jsx)("button",{onClick:()=>{l.current.currentTime=e[1][2],l.current.play()},children:e[1][0]})]}),(0,r.jsxs)("li",{children:["event02",(0,r.jsx)("button",{onClick:()=>{l.current.currentTime=e[2][2],l.current.play()},children:e[2][0]})]}),(0,r.jsxs)("li",{children:["event03",(0,r.jsx)("button",{onClick:()=>{l.current.currentTime=e[3][2],l.current.play()},children:e[3][0]})]}),(0,r.jsxs)("li",{children:["event04",(0,r.jsx)("button",{onClick:()=>{l.current.currentTime=e[4][2],l.current.play()},children:e[4][0]})]}),(0,r.jsxs)("li",{children:["event05",(0,r.jsx)("button",{onClick:()=>{l.current.currentTime=e[5][2],l.current.play()},children:e[5][0]})]}),(0,r.jsxs)("li",{children:["event06",(0,r.jsx)("button",{onClick:()=>{l.current.currentTime=e[6][2],l.current.play()},children:e[6][0]})]}),(0,r.jsxs)("li",{children:["event07",(0,r.jsx)("button",{onClick:()=>{l.current.currentTime=e[7][2],l.current.play()},children:e[7][0]})]}),(0,r.jsxs)("li",{children:["event08",(0,r.jsx)("button",{onClick:()=>{l.current.currentTime=e[8][2],l.current.play()},children:e[8][0]})]}),(0,r.jsxs)("li",{children:["event09",(0,r.jsx)("button",{onClick:()=>{l.current.currentTime=e[9][2],l.current.play()},children:e[9][0]})]})]})})]})]})}},8811:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return dynamic}});let r=n(1024);n(2265);let l=r._(n(7075));function convertModule(e){return{default:(null==e?void 0:e.default)||e}}function dynamic(e,t){let n=l.default,r={loading:e=>{let{error:t,isLoading:n,pastDelay:r}=e;return null}};"function"==typeof e&&(r.loader=e),Object.assign(r,t);let i=r.loader;return n({...r,loader:()=>null!=i?i().then(convertModule):Promise.resolve(convertModule(()=>null))})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},9167:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{suspense:function(){return suspense},NoSSR:function(){return NoSSR}});let r=n(1283);function suspense(){let e=Error(r.NEXT_DYNAMIC_NO_SSR_CODE);throw e.digest=r.NEXT_DYNAMIC_NO_SSR_CODE,e}function NoSSR(e){let{children:t}=e;return t}},7075:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return _default}});let r=n(1024),l=r._(n(2265)),i=n(9167),_default=function(e){let t=Object.assign({loader:null,loading:null,ssr:!0},e);function LoadableComponent(e){let n=t.loading,r=l.default.createElement(n,{isLoading:!0,pastDelay:!0,error:null}),c=t.ssr?l.default.Fragment:i.NoSSR,u=t.lazy;return l.default.createElement(l.default.Suspense,{fallback:r},l.default.createElement(c,null,l.default.createElement(u,e)))}return t.lazy=l.default.lazy(t.loader),LoadableComponent.displayName="LoadableComponent",LoadableComponent}}},function(e){e.O(0,[621,176,971,472,744],function(){return e(e.s=9349)}),_N_E=e.O()}]);