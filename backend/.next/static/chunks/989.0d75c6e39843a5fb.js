"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[989],{4989:function(e,l,o){o.r(l),o.d(l,{VadVideoPlayer:function(){return VadVideoPlayer}});var t=o(7437),n=o(6232),a=o(2265);let VadVideoPlayer=e=>{let{videoRef:l}=e,[o,i]=(0,a.useState)(null),[s,r]=(0,a.useState)(!1);return(0,n.useMicVAD)({onSpeechEnd:e=>{let l=n.utils.encodeWAV(e),o=new File([l],"audio.wav");n.utils.arrayBufferToBase64(l),i(o),console.log("Speach ends")}}),(0,a.useEffect)(()=>{if(console.log(s),!s){let fn=async()=>{try{if(r(!0),console.log("useEffect"),o){let e=new FormData;e.append("file",o);let t=await fetch("http://127.0.0.1:3000/audio",{method:"POST",body:e});if(console.log(t),t.ok){let e=await t.json();console.log(e),l.current.currentTime=e.time,l.current.play(),console.log("video is playing")}else console.log("errored")}}catch(e){alert(e)}i(null),r(!1)};fn()}},[o]),(0,t.jsxs)("div",{children:[(0,t.jsx)("video",{id:"video",ref:l,src:"videos/S1720001.MP4",controls:!0,autoPlay:!0,muted:!0}),s?(0,t.jsx)("div",{children:"処理待ち中"}):(0,t.jsx)("div",{children:"喋っていいよ"})]})};l.default=VadVideoPlayer}}]);